<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <style>
        #price {
            font-size: x-large;
        }

        .color-select {
            padding: 10px;
            border-radius: 5px;
            width: 100%;
            border-color: grey;
            background-color: white;
            margin-bottom: 10px;
        }

        .selected {
            border-color: #0071e3;
        }

        .network-select {
            text-align: left;
            font-size: 15px;
        }
    </style>
</head>

<body>
    <span style="visibility: hidden">
        <button onclick="document.getElementById('device').value = 'iPhone'">IPhone</button>
        <button onclick="document.getElementById('device').value = 'iPad'">IPAD</button>
        <button onclick="document.getElementById('device').value = 'Mac'">MAC</button>
    </span>
    <span style="visibility: hidden">
        <select id="device">
            <option value="iPad">iPad</option>
            <option value="iPhone">iPhone</option>
            <option value="Mac">Mac</option>
        </select>
        <select id="color">
            <option value="太空灰色">太空灰色</option>
            <option value="藍色">藍色</option>
            <option value="粉紅色">粉紅色</option>
            <option value="紫色">紫色</option>
            <option value="星光色">星光色</option>
        </select>
        <select id="storage">
            <option value="64GB">64GB</option>
            <option value="256GB">256GB</option>
        </select>
        <select id="network">
            <option value="Cellular">WiFi+行動網路</option>
            <option value="Wi-Fi">WiFi</option>
        </select>
    </span>
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button onclick="document.getElementById('device').value = 'iPad'" class="nav-link active" id="home-tab"
                data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home"
                aria-selected="true">IPAD</button>
        </li>
        <li class="nav-item" role="presentation">
            <button onclick="document.getElementById('device').value = 'iPhone'" class="nav-link" id="profile-tab"
                data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile"
                aria-selected="false">IPhone</button>
        </li>
        <li class="nav-item" role="presentation">
            <button onclick="document.getElementById('device').value = 'Mac'" class="nav-link" id="contact-tab"
                data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact"
                aria-selected="false">MAC</button>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
            <div class="row" style="padding: 0 32px; margin-top: 60px;">
                <div class="col-md-6">
                    <img id="image" class="productimage" src="Apple/blue.png"
                        style="width: 100%;  border-radius: 20px;">
                </div>
                <div class="col-md-6">
                    <h1>Color</h1>
                    <div class="row">
                        <div class="col-md-6">
                            <button data="藍色" class="btn-color color-select btn-outline-dark"
                                onclick="document.getElementById('color').value = '藍色'">
                                <img src="./Apple/ipad-air-finish-blue-2022.png" alt="" style="width: 30px;"><br>
                                blue</button>
                        </div>
                        <div class="col-md-6">
                            <button data="太空灰色" class="btn-color color-select btn-outline-dark"
                                onclick="document.getElementById('color').value = '太空灰色'">
                                <img src="./Apple/ipad-air-finish-space-gray-2022.png" alt=""
                                    style="width: 30px;"><br>gray</button>
                        </div>
                        <div class="col-md-6">
                            <button data="粉紅色" class="btn-color color-select btn-outline-dark"
                                onclick="document.getElementById('color').value = '粉紅色'">
                                <img src="./Apple/ipad-air-finish-pink-2022.png" alt=""
                                    style="width: 30px;"><br>pink</button>
                        </div>
                        <div class="col-md-6">
                            <button data="紫色" class="btn-color color-select btn-outline-dark"
                                onclick="document.getElementById('color').value = '紫色'">
                                <img src="./Apple//ipad-air-finish-purple-2022.png" alt=""
                                    style="width: 30px;"><br>purple</button>
                        </div>
                        <div class="col-md-6">
                            <button data="星光色" class="btn-color color-select btn-outline-dark"
                                onclick="document.getElementById('color').value = '星光色'">
                                <img src="./Apple/ipad-air-finish-starlight-2022.png" alt=""
                                    style="width: 30px;"><br>starlight</button>
                        </div>
                    </div>


                    <h1>Storage</h1>
                    <div class="row">
                        <div class="col-md-6">
                            <button data="64GB" class="btn-storage color-select btn-outline-dark"
                                onclick="document.getElementById('storage').value = '64GB'">
                                <h2>64GB</h2><br>NT$19,900 起
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button data="256GB" class="btn-storage color-select btn-outline-dark"
                                onclick="document.getElementById('storage').value = '256GB'">
                                <h2>256GB</h2><br>NT$24,900 起
                            </button>
                        </div>

                    </div>

                    <h1>Network</h1>
                    <button data="Wi-Fi" class="btn-network network-select color-select btn-outline-dark"
                        onclick="document.getElementById('network').value = 'Wi-Fi'">
                        <h2>Wi-Fi</h2><br>每部 iPad 都可連接到 Wi-Fi 網路，使你能保持連線。
                    </button>
                    <button data="Cellular" class="btn-network network-select color-select btn-outline-dark"
                        onclick="document.getElementById('network').value = 'Cellular'">
                        <h2>Wi-Fi + 行動網路</h2><br>Wi-Fi + 行動網路機型讓你在無法使用 Wi-Fi 時也能進行連線。
                    </button>

                </div>


            </div>
        </div>
        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
            <div class="row" style="padding: 0 32px; margin-top: 60px;">
                <div class="col-md-6">
                    <img id="image" class="productimage" src="Apple/blue.png"
                        style="width: 100%;  border-radius: 20px;">
                </div>
                <div class="col-md-6">
                    <h1>Color</h1>
                    <div class="row">
                        <div class="col-md-6">
                            <button data="藍色" class="btn-color color-select btn-outline-dark"
                                onclick="document.getElementById('color').value = '藍色'">
                                <img src="./Apple/ipad-air-finish-blue-2022.png" alt="" style="width: 30px;"><br>
                                blue</button>
                        </div>
                        <div class="col-md-6">
                            <button data="紫色" class="btn-color color-select btn-outline-dark"
                                onclick="document.getElementById('color').value = '紫色'">
                                <img src="./Apple/ipad-air-finish-purple-2022.png" alt=""
                                    style="width: 30px;"><br>purple</button>
                        </div>

                    </div>


                    <h1>Storage</h1>
                    <div class="row">
                        <div class="col-md-6">
                            <button data="128GB" class="btn-storage color-select btn-outline-dark"
                                onclick="document.getElementById('storage').value = '128GB'">
                                <h2>128GB</h2><br>NT$29,900 起
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button data="256GB" class="btn-storage color-select btn-outline-dark"
                                onclick="document.getElementById('storage').value = '256GB'">
                                <h2>256GB</h2><br>NT$31,400 起
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button data="512GB" class="btn-storage color-select btn-outline-dark"
                                onclick="document.getElementById('storage').value = '512GB'">
                                <h2>512GB</h2><br>NT$38,400 起
                            </button>
                        </div>
                        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                            

                                <!-- <img id="image" src="./Apple/" alt=""> -->







                            </div>

                        </div>
                    </div>
                    <p id="price"></p>
                    <script>

                        let orgurl = './Apple/'

                        let string1 = `字串${orgurl}`
                        let string2 = "字串" + orgurl

                        var products = []; // 包含 iPad 数据的数组，可以在代码中初始化或通过 Ajax 请求从 JSON 文件中获取

                        var request = new XMLHttpRequest();
                        request.open("GET", "https://raw.githubusercontent.com/Sophiekk01/FileStorage/main/iPad.json", true);

                        request.onreadystatechange = function () {
                            if (request.readyState === 4 && request.status === 200) {
                                products = JSON.parse(request.responseText);
                            }
                        };
                        request.send();

                        // 添加事件监听器
                        document.getElementById("device").addEventListener("change", updatePriceAndImage);
                        document.getElementById("color").addEventListener("change", updatePriceAndImage);
                        document.getElementById("storage").addEventListener("change", updatePriceAndImage);
                        document.getElementById("network").addEventListener("change", updatePriceAndImage);

                        function updatePriceAndImage() {
                            console.log('updatePriceAndImage')
                            var selectedDevice = document.getElementById("device").value;
                            var selectedColor = document.getElementById("color").value;
                            var selectedStorage = document.getElementById("storage").value;
                            var selectedNetwork = document.getElementById("network").value;

                            console.log('selectedColor' + selectedColor)
                            console.log('selectedStorage' + selectedStorage)
                            console.log('selectedNetwork' + selectedNetwork)

                            console.log('...' + products[0].color)

                            document.querySelectorAll(".btn-color").forEach(element => {
                                element.classList.remove("selected")
                            })
                            document.querySelectorAll(".btn-storage").forEach(element => {
                                element.classList.remove("selected")
                            })
                            document.querySelectorAll(".btn-network").forEach(element => {
                                element.classList.remove("selected")
                            })
                            document.querySelector(`[data="${selectedColor}"]`).classList.add("selected")
                            document.querySelector(`[data="${selectedStorage}"]`).classList.add("selected")
                            document.querySelector(`[data="${selectedNetwork}"]`).classList.add("selected")
                            var filteredcolorandstorage = products.filter(function (products) {
                                return (
                                    products.device === selectedDevice &&
                                    products.color === selectedColor &&
                                    products.storage === selectedStorage
                                );
                            });
                            if (selectedDevice == "iPad") {
                                var filteredproducts = filteredcolorandstorage.filter(function (products) {
                                    return (
                                        products.network === selectedNetwork
                                    );
                                });
                            } else {
                                var filteredproducts = filteredcolorandstorage
                            }


                            console.log(filteredproducts)
                            if (filteredproducts.length > 0) {
                                var price = filteredproducts[0].price;
                                var imageSrc = filteredproducts[0].picture;

                                document.getElementById("price").textContent = "價格：" + price;

                                imageSrc = orgurl + imageSrc

                                console.log(document.getElementById("image").src)

                                // document.getElementById("image").src = imageSrc;
                                document.querySelectorAll(".productimage").forEach(element => {
                                    element.src = imageSrc;
                                })
                                console.log("picture:" + imageSrc)
                            } else {
                                document.getElementById("price").textContent = "未找到匹配的 iPad 型號。";
                                document.querySelectorAll(".productimage").forEach(element => {
                                    element.src = "";
                                })

                            }
                        }
                    </script>
                    <!-- Bootstrap JavaScript Libraries -->
                    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
                        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
                        crossorigin="anonymous">
                        </script>

                    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
                        integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
                        crossorigin="anonymous">
                        </script>
                    <script>

                        function toggleSelected(el) {
                            this.classList.toggle("selected")
                        }
                        document.querySelectorAll(".color-select").forEach(element => {
                            element.addEventListener("click",
                                updatePriceAndImage
                            )

                        });
                    </script>
</body>

</html>